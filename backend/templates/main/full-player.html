<!-- main/full-player.html  -->
{% load static %}
{% load utils %}
{% load fontawesome_5 %}


{% include "main/widget-title.html" with caption=song.title subcaption="CanciÃ³n" link_url="/admin/main/song/" link_object=song.pk link_url_suffix="/change" link_hint="Edit Song Details" link_newtab=True %}
{% if song.album.pk %}
    {% include "main/widget-back.html" with url="album-detail" hardcoded_url=False url_params=song.album.pk %}
{% endif %}

<a onclick="melodify.navigate(`{% url 'artist-detail' song.artist.pk %}`)">
    {{ song.artist.name }}
</a>

<div class="song-detail-container">
    
    <div class="album-info-section">
        {% if song.album.pk %}
        <a onclick="melodify.navigate(`{% url 'album-detail' song.album.pk %}`)">
            <h4>{{ song.album.name }}</h4>
            <div class="album-art" style="justify-content: left !important;">
                {% if song.album.picture %}
                <div class="album-image" style="background-image: url('{{ song.album.picture }}')" alt="{{ song.album.name }} cover"></div>
                {% else %}
                <div class="placeholder-image">ðŸ’¿</div>
                {% endif %}
            </div>
        </a>
        
        <!-- lista de artistas -->
        
        <p class="labels">
            <strong>Artista{% if song.album.artists.count > 1 %}s{% endif %}:</strong>
            {% for artist in song.album.artists.all %}
            <a onclick="melodify.navigate(`{% url 'artist-detail' artist.pk %}`)">{{ artist.name }}</a>
            {% endfor %}
        </p>
        {%endif%}
        
        <!-- Datos de cancion -->
        {% if song.tags.all.count > 0 %}
        <p class="labels"><strong>Tags:</strong>{% for tag in song.tags.all %}<a>{{ tag }}</a>{% endfor %}</p>
        {% endif %}
        
        {% if song.genre %}
            <p class="labels"><strong>GÃ©nero: </strong>
                <a onclick="melodify.navigate(`{% url 'genre-detail' song.genre.pk %}`)">{{ song.genre }}</a>
            </p>
        {% endif %}
        
        <p>
            <strong>DuraciÃ³n:</strong> 
            {{ song.duration|strftime:'' }}
        </p> 
        
        <!-- El reproductor de audio -->
        <p class="breathe">
            {% if song.filename %}
                <audio controls preload="none">
                    <source src="{% static song.filename %}" type="audio/mpeg">
                    Tu navegador no soporta el elemento de audio.
                </audio>
            {% else %}
                <span class="no-track-available">Pista no disponible</span>
            {% endif %}
        </p>
    </div>

</div>

<script>

</script>