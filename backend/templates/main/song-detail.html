{% extends 'base.html' %}
{% load static %}

{% block header %}
{% endblock %}

{% block content-title %}{{ song.title }}{% endblock %}

{% block content %}
<div class="song-detail-container">
    <p>
        <strong>Duraci√≥n:</strong> 
        {{ song.duration }}
    </p> 

    <div class="album-info-section">
        
        <a href="{% url 'album-detail' song.album.pk %}">
            <h4>{{ song.album.name }}</h4>
            <div class="album-art" style="justify-content: left !important;">
                {% if song.album.picture %}
                <div class="album-image" style="background-image: url('{{ song.album.picture }}')" alt="{{ song.album.name }} cover"></div>
                {% else %}
                <div class="placeholder-image">üíø</div>
                {% endif %}
            </div>
        </a>

        <!-- lista de artistas -->
        <p class="labels">
            <strong>Artista{% if song.album.artists.count > 1 %}s{% endif %}:</strong>
            {% for artist in song.album.artists.all %}
            <a href="{% url 'artist-detail' artist.pk %}">{{ artist.name }}</a>
            {% endfor %}
        </p>
        
        <!-- Datos de cancion -->
        
        <p class="labels"><strong>Tags:</strong>{% for tag in song.tags.all %}<a>{{ tag }}</a>{% endfor %}</p>
        <p><strong>G√©nero:</strong><a>{{ song.genre }}</a></p>

        <!-- El reproductor de audio -->
        <p class="breathe">
            {% if song.filename %}
                <div class="audio-player-container">                    
                    <audio controls preload="none">
                        <source src="{% static song.filename %}" type="audio/mpeg">
                        Tu navegador no soporta el elemento de audio.
                    </audio>
                </div>
            {% else %}
                <span class="no-track-available">Pista no disponible</span>
            {% endif %}
        </p>
    </div>

</div>

{% endblock %}
{% block back %}
<a href="{% url 'album-detail' song.album.pk %}" class="back-link">
    ‚Üê Volver al listado del √°lbum
</a>
{% endblock %}